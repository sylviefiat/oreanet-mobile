<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
	<!--<meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *">-->
	
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile.datepicker.css" /> 
	<link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.min.css" />
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="css/addresspicker.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/openlayers/3.17.1/ol.css" />
	
	<script language="javascript" type="text/javascript" src="js/conf.js"></script>
	<script language="javascript" type="text/javascript" src="js/jquery-1.11.3.min.js"></script>	
	<script language="javascript" type="text/javascript" src="js/jquery.mobile-1.4.5.min.js"></script>
  	<script language="javascript" type="text/javascript" src="js/jquery.mobile.datepicker.js"></script>
	<script language="javascript" type="text/javascript" src="js/jquery.ui.datepicker.js"></script>
	<script language="javascript" type="text/javascript" src="js/jquery.validate.js"></script>
	<script language="javascript" type="text/javascript" src="js/additional-methods.js"></script>
	<script language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/openlayers/3.17.1/ol.js"></script>
        <title>Oreanet NC</title>
    </head>
    <body>
        <div class="app">            
            <div id="devicereadyoff">
            	<!-- Splashscreen du debut -->	
                <div class="event listening row vertical-align">
				    <div class="splashscreen col-xs-12 col-sm-12 col-md-6 col-md-offset-3">
						<img src="img/logo.png" title="logo"/>
						<p class="blink">Connecting</p>
				    </div>
				</div>
				<!-- Splashscreen en cours d'envoi -->
				<div class="event onsend row vertical-align">
				    <div class="splashscreen col-xs-12 col-sm-12 col-md-6 col-md-offset-3">			
						<p class="blink">Sending report</p>
				    </div>
				</div>
				<!-- Splashscreen de la fin -->
				<div class="event onclose row vertical-align">
				    <div class="thankyoupage col-xs-12 col-sm-12 col-md-6 col-md-offset-3">
						<img src="img/logo.png" title="logo"/>
						<p id="msg-fin-enregistre">Merci d'avoir rapporté la présence d'acanthaster en Nouvelle-Calédonie</p>
						<p><a id="lien-reload" href="#" onclick="return app.reloadForm()">Signaler d'autres acanthasters</a></p>
						<p><a id="lien-site-web" href="http://oreanet.ird.nc">Aller voir le site de suivi Oreanet</a></p>
						<p><a href="#" onclick="navigator.app.exitApp(); return app.reloadForm();">Quitter</a></p>
				    </div>
				</div>
        </div>
	    <!-- module d'affichage des messages (erreur ou info) -->
		    <div id="system-message-container">
				<div id="system-message">
				    <div class="alert fade in" id="message">
					<a class="close" onclick="return app.closeMsg()">×</a>
					<p id="msg" class="alert-message">
					    
					</p>
				    </div>
				</div>
		    </div>
		    <!-- page principale -->
		    <div id="contentoff" class="container contenu">	    	
			<div class="row">
				<!-- navbar -->
				<nav class="navbar navbar-default navbar-fixed-top custom-navbar" role="navigation">
					<div data-role="header">
						<div data-role="controlgroup" data-type="horizontal" class="ui-mini ui-btn-right">
							<button class="ui-btn ui-btn-icon-right fa fa-signal" id="onlinelist"></button>
							<button id="btn-refresh" onclick="return app.reloadForm()" class="ui-btn ui-btn-icon-right fa fa-refresh"></button>
							<button id="btn-send" onclick="return app.submitForm()" class="ui-btn ui-btn-icon-right fa fa-paper-plane invalid"></button>
						</div>
						<div id="navbar" data-role="collapsible" data-collapsed-icon="bars" data-expanded-icon="delete" class="ui-btn-left ui-mini">
							<h6>Signaler des Acanthasters</h6>
							<ul data-role="listview">
								<li><a href="#" onclick="return app.showInfoMsg()">Info</a></li>
								<li id="lien-site-menu"><a href="http://oreanet.ird.nc">Voir le site</a></li>
							</ul>
						</div>
 					</div>
 				</nav>
				<!-- /navbar -->
				
			    <!-- formulaire -->
			    <div class="col-lg-12">
				<div class="cot_admin_edit front-end-edit">
		    		<div class="form">
					 
					<form method="get" id="form-cot_admin" role="form">
					    
					    <!-- part I -->
					    <label>
					    	<span class="input-group-addon exergue"><span class="fa fa-user"></span> Observateur</span>
					    </label>
					
					    <div data-role="fieldcontain" class="ui-hide-label">
					        <label for="observer_name">Observateur</label>	
					    	<input type="text" name="observer_name" id="observer_name" value="" placeholder="Nom de l'observateur" required/>
					     	<span style="display:none;" >
				    		    <input type="text" id="id" name="id" readonly="readonly" value="" size="32"/>
				    	    	</span>
					    </div>
					    <div data-role="fieldcontain" class="ui-hide-label">
							<label for="observer_tel">N° de l'observateur</label>				    		
					    	<input type="tel" name="observer_tel" id="observer_tel" value="" placeholder="Numéro de téléphone"/>
					    </div>
					    <div data-role="fieldcontain" class="ui-hide-label">
							<label for="observer_email">Email</label>				    		
					    	<input type="email" name="observer_email" id="observer_email" value="" placeholder="Email de l'observateur" required/>
					    </div>

					    <!-- part II -->
					    <label>
					    	<span class="input-group-addon exergue"><span class="fa fa-calendar"></span> Date et lieu</span>
					    </label>	
					    <div data-role="fieldcontain" class="ui-hide-label">
							<label for="observation_date">Date</label>				    
					    	<input name="observation_datetime" id="observation_datetime" placeholder="Date" data-role="date" type="text">
					    </div>
					    <div data-role="fieldcontain" class="ui-hide-label">
							<label for="observer_location">Contexte</label>				    		
					    	<textarea name="observation_location" id="observation_location" placeholder="Lieu ou position "></textarea>
					    </div>

					    <div id="offlineForm">

					    <div data-role="fieldcontain" class="ui-hide-label">
							<label for="observer_localisation">Localisation</label>				    		
					    	<input type="text" id="observation_localisation" name="observation_localisation" class="formatted_address" value="" size="32" autocomplete="off" placeholder="Sélectionner la localisation sur la carte" required></input>
					    </div>
					    <div data-role="fieldcontain" class="ui-hide-label">
							<label for="observer_region">Région</label>				    		
					    	<input type="text" name="observation_region" id="observation_region" value="" class="region form-control" placeholder="Région"/>
					    </div>
					    <div data-role="fieldcontain" class="ui-hide-label">
							<label for="observer_pays">Pays</label>				    		
					    	<input type="text" name="observation_pays" id="observation_pays" value="" class="country form-control" placeholder="Pays"/>
					    </div>
					    <div data-role="fieldcontain" class="ui-hide-label">
							<label for="observer_latitude">Latitude</label>				    		
					    	<input type="text" name="observation_latitude" id="observation_latitude" value="" class="latitude form-control" placeholder="Latitude"/>
					    </div>
					    <div data-role="fieldcontain" class="ui-hide-label">
							<label for="observer_longitude">Longitude</label>				    		
					    	<input type="text" name="observation_longitude" id="observation_longitude" value="" class="longitude form-control" placeholder="Longitude"/>
					    </div>

					    </div>

					    <!-- part III -->
					    <label>
					    	<span class="input-group-addon exergue"><span class="fa fa-eye"></span> Acanthasters</span>
					    </label>
					    <div data-role="fieldcontain" class="ui-hide-label">
							<label for="observation_number">Acanthasters observées</label>				    
					    	<input type="text" name="observation_number" id="observation_number" value="" placeholder="Nombre d'acanthasters observées" required/>
					    </div>
					    <div data-role="fieldcontain" class="ui-hide-label">
							<label for="observer_culled">Acanthasters Nettoyées</label>				    		
					    	<input type="text" name="observation_culled" id="observation_culled" value="" placeholder="Nombre d'acanthasters nettoyées"/>
					    </div>

				    	<!-- part IV -->
				    	<label>
				    		<span class="input-group-addon exergue"><span class="fa fa-binoculars"></span> Méthode d'observation</span>
				    	</label>	
					    <div data-role="fieldcontain" class="ui-hide-label">
					        <fieldset data-role="controlgroup">
							    <legend>Méthode d'observation</legend>
							    <input type="checkbox" name="observation_method0" id="observation_method0" value="snorkelling"/>
							    <label for="observation_method0" id="label_observation_method0">PMT</label>
							    <input type="checkbox" name="observation_method1" id="observation_method1" value="scuba diving"/>
							    <label for="observation_method1" id="label_observation_method1">Plongée bouteille</label>
					        </fieldset>
					    </div>
					    <!-- part V -->
					    <label>
					    	<span class="input-group-addon exergue"><span class="fa fa-arrows-v"></span> Tranches de profondeur</span>
					    </label>	
					    <div data-role="fieldcontain" class="ui-hide-label">
					        <fieldset data-role="controlgroup">
							    <legend>Tranches de profondeur</legend>
							    <input type="checkbox" id="depth_range0" name="depth_range0" value="shallow">
							    <label for="depth_range0" id="label_depth_range0">Moins de 2m</label>
							    <input type="checkbox" id="depth_range1" name="depth_range1" value="medium">
							    <label for="depth_range1" id="label_depth_range1">Entre 2 et 10m</label>
							    <input type="checkbox" id="depth_range2" name="depth_range" value="deep">
							    <label for="depth_range2" id="label_depth_range2">Plus de 10m</label>
					        </fieldset>
					    </div>
					   <!-- part VI -->
					    <label>
					    	<span class="input-group-addon exergue"><span class="fa fa-cogs"></span> Méthode de comptage</span>
					    </label>
					    <div data-role="fieldcontain" class="ui-hide-label">
					        <fieldset data-role="controlgroup" data-type="horizontal">
							    <legend>Méthode de comptage</legend>
							    <input type="checkbox" id="counting_method_timed_swim_chbx" name="counting_method_timed_swim_chbx" onclick="app.enable_timed_swim(this.checked)"></input>
							    <label for="counting_method_timed_swim_chbx">Temps de nage</label>
							    <input type="checkbox" id="counting_method_distance_swim_chbx" name="counting_method_distance_swim_chbx" onclick="app.enable_distance_swim(this.checked)"></input>
							    <label for="counting_method_distance_swim_chbx">Distance parcourue</label>
							    <input type="checkbox" id="counting_method_other_chbx" name="counting_method_other_chbx" onclick="app.enable_other(this.checked)"></input>
							    <label for="counting_method_other_chbx">Autre</label>
					        </fieldset>
					    </div>

					    <div data-role="fieldcontain" class="ui-hide-label">
						<label for="counting_method_timed_swim">Temps</label>
						<input type="text" name="counting_method_timed_swim" id="counting_method_timed_swim" value="" class="form-control" placeholder="Temps de nage" readonly="readonly">
					    </div>
					   
					    <div data-role="fieldcontain" class="ui-hide-label">
						<label for="counting_method_distance_swim" class="ui-hidden-accessible">Distance</label>
						<input type="text" name="counting_method_distance_swim" id="counting_method_distance_swim" value="" class="form-control" placeholder="Distance parcourue" readonly="readonly"></input>
					    </div>
					    
					    <div data-role="fieldcontain" class="ui-hide-label">
						<label for="counting_method_other" class="ui-hidden-accessible">Other</label>
						<input type="text" name="counting_method_other" id="counting_method_other" value="" class="form-control" placeholder="Autre" readonly="readonly"></input>			
					    </div>
					    <!-- part VII -->
					    <label>
					    	<span class="input-group-addon exergue"><span class="fa fa-comment"></span> Remarques</span>
					    </label>
					    <div data-role="fieldcontain" class="ui-hide-label">
						<label for="remarks">Remarques</label>				    		
					    	<textarea name="remarks" id="remarks" placeholder="Ex: couverture de corail vivant, coraux morts, blanchiment, présence d'algues…"></textarea>
					    </div>
					    <!-- part VIII -->
					    <div id="btns-cancel-save">
		    				<button id="btn-cancel" style="display:none;" href="#" onclick="return app.cancel()">Retour à la liste</button>
		    				<button id="btn-save" style="display:none;" href="#" onclick="return app.saveForm()">Sauvegarder</button>
		    			</div>	

					</form>
				    </div>
				</div>
		    	</div>
		    </div>
		</div>
   	</div>
	<script language="javascript" type="text/javascript" src="cordova.js"></script>
        <script language="javascript" type="text/javascript" src="js/index.js"></script>
	<script language="javascript" type="text/javascript" src="js/sql.js"></script>
        <script language="javascript" type="text/javascript" src="js/dbutils.js"></script>
	<script language="javascript" type="text/javascript" src="js/addresspicker.js"></script>
        <script language="javascript" type="text/javascript">
        	app.initialize();
        </script>
    </body>
</html>
